{"version":3,"file":"js/72.3f91bbc4.js","mappings":"gOACOA,MAAM,oB,GAEPC,EAAAA,EAAAA,GAA6C,OAAxCD,MAAM,iBAAgB,gBAAY,G,SACjBA,MAAM,iB,GAWvBA,MAAM,gB,GACJA,MAAM,e,GAWNA,MAAM,e,GAaNA,MAAM,e,0EAvCjBE,EAAAA,EAAAA,IA8CM,MA9CNC,EA8CM,EA7CJC,EAAAA,EAAAA,IA4CSC,EAAAA,EAAAA,CA5CDC,IAAI,OAAON,MAAM,aAAcO,UAAM,QAAUC,EAAAA,mBAAkB,c,mBACvE,IAA6C,CAA7CC,EACYD,EAAAA,WAAQ,WAApBN,EAAAA,EAAAA,IAGO,OAHPQ,EAGO,UAHqC,uBAE1C,QAA4DC,EAAAA,CAA9CC,GAAI,CAAAC,KAAAA,UAAiB,C,kBAAE,IAAS,UAAT,gB,yBAG/BL,EAAAA,OAAOM,MAAMC,UAAO,WAD5Bb,EAAAA,EAAAA,IAMM,O,MAJHF,OAAK,SAAEQ,EAAAA,OAAOM,MAAME,GAAK,UAAY,OAChC,+B,EAENf,EAAAA,EAAAA,GAAwC,qBAA/BO,EAAAA,OAAOM,MAAMC,SAAO,yBAE/Bd,EAAAA,EAAAA,GA8BM,MA9BNgB,EA8BM,EA7BJhB,EAAAA,EAAAA,GAUM,MAVNiB,EAUM,EATJd,EAAAA,EAAAA,IAQgBe,EAAAA,GAAAA,CAPdC,UAAA,GACAC,QAAQ,WACRC,MAAM,Q,WACGd,EAAAA,OAAOM,MAAMS,M,qCAAbf,EAAAA,OAAOM,MAAMS,MAAK,GAC1BC,MAAOhB,EAAAA,MAAMgB,MACdC,GAAG,QACHC,KAAK,S,kCAGTzB,EAAAA,EAAAA,GAYM,MAZN0B,EAYM,EAXJvB,EAAAA,EAAAA,IAUgBe,EAAAA,GAAAA,CATdC,UAAA,GACC,cAAaZ,EAAAA,MAAMoB,aAAe,UAAY,cAC9CF,KAAMlB,EAAAA,MAAMoB,aAAe,OAAS,WACpC,iBAAcpB,EAAAA,aACfa,QAAQ,WACRC,MAAM,W,WACGd,EAAAA,OAAOM,MAAMe,S,qCAAbrB,EAAAA,OAAOM,MAAMe,SAAQ,GAC7BL,MAAOhB,EAAAA,MAAMgB,MACdC,GAAG,Y,wEAGPxB,EAAAA,EAAAA,GAIM,MAJN6B,EAIM,EAHJ1B,EAAAA,EAAAA,IAEC2B,EAAAA,EAAAA,CAFM/B,MAAM,YAAYqB,QAAQ,QAAQK,KAAK,U,mBAC3C,IAAgB,UAAhB,uB,4EAYb,GAAeM,EAAAA,EAAAA,IAAgB,CAC7BC,QACE,MAAM,MAAEnB,EAAK,OAAEoB,EAAM,SAAEC,IAAaC,EAAAA,EAAAA,MAC9BC,GAASC,EAAAA,EAAAA,MACTC,GAAOjC,EAAAA,EAAAA,IAAI,MACXkC,GAAWlC,EAAAA,EAAAA,KAAKmC,eAAeC,QAAQ,OAY7C,SAASd,IACPM,EAAO,eACT,CAEAS,eAAeC,IACb,MAAM,MAAEC,SAAgBN,EAAKO,MAAMC,WAC/BF,GACFV,EAAS,qBAEb,CAEA,OArBAD,EAAO,aAIkB,eAAvBc,SAASC,YACc,YAAvBD,SAASC,WAETZ,EAAOa,KAAK,CAAErC,KAAM,gBACVC,EAAMqC,KAAQrC,EAAMsC,MAAMf,EAAOa,KAAK,CAAErC,KAAM,SAanD,CAAEC,QAAOyB,OAAMC,WAAUZ,eAAcgB,qBAChD,I,QC5EF,MAAMS,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,sHCEO,MAAMC,GAAQvB,EAAAA,EAAAA,IAAgB,CACnCnB,KAAM,QAEN2C,MAAO,KACFC,EAAAA,EAAAA,OAGLC,MAAO,CACL,oBAAsBC,IAAwB,EAC9CC,OAASC,IAA0B,GAGrC5B,MAAOuB,EAAO,GAAiB,IAAjB,MAAEM,EAAK,KAAEC,GAAM,EAC3B,MAAMxB,GAAOyB,EAAAA,EAAAA,IAAWR,GAClBS,GAAU3D,EAAAA,EAAAA,MAEhB,SAAS4D,EAASL,GAChBA,EAAEM,iBACF5B,EAAK6B,OACP,CAEA,SAAS7D,EAAU8D,GACjB,MAAMR,EAAIQ,EAEJC,EAAQ/B,EAAKQ,WACnBc,EAAEU,KAAOD,EAAMC,KAAKC,KAAKF,GACzBT,EAAEY,MAAQH,EAAMG,MAAMD,KAAKF,GAC3BT,EAAEa,QAAUJ,EAAMI,QAAQF,KAAKF,GAE/BP,EAAK,SAAUF,GAEVA,EAAEc,kBACLL,EAAMC,MAAKK,IAAe,IAAd,MAAE/B,GAAO,EACR,MAAPA,IACW,OAAb,EAAAoB,EAAQnB,QAAR+B,EAAejB,SACjB,IAIJC,EAAEM,gBACJ,CAcA,OAZAW,EAAAA,EAAAA,IAAU,sCAEAb,EAAO,MACP,SAAQ,sBAEJC,EAAO,SACN3D,GAAQ,CAEJ,OAFI,EAEjBuD,EAAMiB,cAAO,EAAbC,EAAAA,KAAAA,EAAgBzC,IAAK,KAIpB0C,EAAAA,EAAAA,GAAY1C,EAAM0B,EAC3B,G","sources":["webpack://cool_ore/./src/views/MaintenanceView.vue","webpack://cool_ore/./src/views/MaintenanceView.vue?a932","webpack://cool_ore/../../../src/components/VForm/VForm.tsx"],"sourcesContent":["<template>\r\n  <div class=\"auth maintenance\">\r\n    <v-form ref=\"form\" class=\"auth__form\" @submit.prevent=\"changeUserPassword\">\r\n      <div class=\"auth__heading\">New Password</div>\r\n      <span v-if=\"isUserId\" class=\"auth__reroute\">\r\n        Have an account?\r\n        <router-link :to=\"{ name: 'login' }\">Login Now</router-link>\r\n      </span>\r\n      <div\r\n        v-if=\"$store.state.message\"\r\n        :class=\"$store.state.ok ? 'success' : 'fail'\"\r\n        class=\"auth__field auth__message\"\r\n      >\r\n        <span>{{ $store.state.message }} </span>\r\n      </div>\r\n      <div class=\"auth__fields\">\r\n        <div class=\"auth__field\">\r\n          <v-text-field\r\n            clearable\r\n            variant=\"outlined\"\r\n            label=\"Email\"\r\n            v-model=\"$store.state.email\"\r\n            :rules=\"state.rules\"\r\n            id=\"email\"\r\n            type=\"email\"\r\n          ></v-text-field>\r\n        </div>\r\n        <div class=\"auth__field\">\r\n          <v-text-field\r\n            clearable\r\n            :append-icon=\"state.showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n            :type=\"state.showPassword ? 'text' : 'password'\"\r\n            @click:append=\"showPassword\"\r\n            variant=\"outlined\"\r\n            label=\"Password\"\r\n            v-model=\"$store.state.password\"\r\n            :rules=\"state.rules\"\r\n            id=\"password\"\r\n          ></v-text-field>\r\n        </div>\r\n        <div class=\"auth__field\">\r\n          <v-btn class=\"auth__btn\" variant=\"tonal\" type=\"submit\"\r\n            >Set New Password</v-btn\r\n          >\r\n        </div>\r\n      </div>\r\n    </v-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from \"@vue/runtime-core\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nexport default defineComponent({\r\n  setup() {\r\n    const { state, commit, dispatch } = useStore();\r\n    const router = useRouter();\r\n    const form = ref(null);\r\n    const isUserId = ref(!sessionStorage.getItem(\"id\"));\r\n\r\n    commit(\"resetForm\");\r\n\r\n    // if the window loads\r\n    if (\r\n      document.readyState == \"interactive\" ||\r\n      document.readyState == \"complete\"\r\n    ) {\r\n      router.push({ name: \"maintenance\" });\r\n    } else if (!state.fix && !state.user) router.push({ name: \"home\" });\r\n\r\n    function showPassword() {\r\n      commit(\"showPassword\");\r\n    }\r\n\r\n    async function changeUserPassword() {\r\n      const { valid } = await form.value.validate();\r\n      if (valid) {\r\n        dispatch(\"changeUserPassword\");\r\n      }\r\n    }\r\n\r\n    return { state, form, isUserId, showPassword, changeUserPassword };\r\n  },\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.maintenance {\r\n  margin: var(--header-height) 0 0 0;\r\n}\r\n\r\n.auth {\r\n  &__fields {\r\n    @include flex($dir: column, $align: flex-start, $gap: 0.35rem);\r\n  }\r\n\r\n  &__reroute {\r\n    a {\r\n      @include font(0.85rem, $weight: 500, $clr: var(--success-color));\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./MaintenanceView.vue?vue&type=template&id=3243f427\"\nimport script from \"./MaintenanceView.vue?vue&type=script&lang=js\"\nexport * from \"./MaintenanceView.vue?vue&type=script&lang=js\"\n\nimport \"./MaintenanceView.vue?vue&type=style&index=0&id=3243f427&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Vincent\\\\Desktop\\\\Research\\\\cool-ore-beta\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Composables\nimport { createForm, makeFormProps } from '@/composables/form'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { ref } from 'vue'\nimport { defineComponent, useRender } from '@/util'\n\n// Types\nimport type { SubmitEventPromise } from '@/composables/form'\n\nexport const VForm = defineComponent({\n  name: 'VForm',\n\n  props: {\n    ...makeFormProps(),\n  },\n\n  emits: {\n    'update:modelValue': (val: boolean | null) => true,\n    submit: (e: SubmitEventPromise) => true,\n  },\n\n  setup (props, { slots, emit }) {\n    const form = createForm(props)\n    const formRef = ref<HTMLFormElement>()\n\n    function onReset (e: Event) {\n      e.preventDefault()\n      form.reset()\n    }\n\n    function onSubmit (_e: Event) {\n      const e = _e as SubmitEventPromise\n\n      const ready = form.validate()\n      e.then = ready.then.bind(ready)\n      e.catch = ready.catch.bind(ready)\n      e.finally = ready.finally.bind(ready)\n\n      emit('submit', e)\n\n      if (!e.defaultPrevented) {\n        ready.then(({ valid }) => {\n          if (valid) {\n            formRef.value?.submit()\n          }\n        })\n      }\n\n      e.preventDefault()\n    }\n\n    useRender(() => ((\n      <form\n        ref={ formRef }\n        class=\"v-form\"\n        novalidate\n        onReset={ onReset }\n        onSubmit={ onSubmit }\n      >\n        { slots.default?.(form) }\n      </form>\n    )))\n\n    return forwardRefs(form, formRef)\n  },\n})\n\nexport type VForm = InstanceType<typeof VForm>\n"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_v_form","ref","onSubmit","_ctx","_hoisted_2","_hoisted_3","_component_router_link","to","name","state","message","ok","_hoisted_4","_hoisted_5","_component_v_text_field","clearable","variant","label","email","rules","id","type","_hoisted_6","showPassword","password","_hoisted_7","_component_v_btn","defineComponent","setup","commit","dispatch","useStore","router","useRouter","form","isUserId","sessionStorage","getItem","async","changeUserPassword","valid","value","validate","document","readyState","push","fix","user","__exports__","render","VForm","props","makeFormProps","emits","val","submit","e","slots","emit","createForm","formRef","onReset","preventDefault","reset","_e","ready","then","bind","catch","finally","defaultPrevented","_ref2","_formRef$value","useRender","default","_slots$default","forwardRefs"],"sourceRoot":""}